<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö—Ä–µ—Å—Ç–∏–∫–∏-–ù–æ–ª–∏–∫–∏</title>

    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Start Screen -->
    <div id="startScreen" class="screen active">
        <div class="screen-content">
            <div class="logo-container">
                <div class="logo">
                    <svg width="80" height="80" viewBox="0 0 80 80" class="logo-svg">
                        <!-- Heart for O -->
                        <path
                            d="M40 70 C20 55, 10 45, 10 30 C10 15, 20 10, 30 15 C35 17, 40 25, 40 25 C40 25, 45 17, 50 15 C60 10, 70 15, 70 30 C70 45, 60 55, 40 70 Z"
                            fill="url(#heartGradient)" class="pulse-animation" />
                        <defs>
                            <linearGradient id="heartGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#FFB6D9;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#E0A8D8;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
            </div>

            <h1 class="title">–ö—Ä–µ—Å—Ç–∏–∫–∏-–ù–æ–ª–∏–∫–∏</h1>
            <p class="subtitle">–í—ã–∏–≥—Ä—ã–≤–∞–π —É —Å–≤–æ–µ–π –Ω–æ–≤–æ–π –ø–æ–¥—Ä—É–≥–∏ –∏ –ø–æ–ª—É—á–∞–π –ø—Ä–æ–º–æ–∫–æ–¥—ã! ‚ú®</p>

            <div class="features">
                <div class="feature">
                    <span class="feature-icon">üíï</span>
                    <span class="feature-text">–£—é—Ç–Ω–∞—è –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –ø–æ–¥—Ä—É–≥–∞</span>
                </div>
                <div class="feature">
                    <span class="feature-icon">üéÅ</span>
                    <span class="feature-text">–î–æ 3 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –≤ –¥–µ–Ω—å</span>
                </div>
                <div class="feature">
                    <span class="feature-icon">üíù</span>
                    <span class="feature-text">–ù–µ–∂–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è —Ç–µ–±—è</span>
                </div>
            </div>

            <button id="startGameBtn" class="primary-button">
                –ù–∞—á–∞—Ç—å –∏–≥—Ä–∞—Ç—å üí´
                <span class="button-glow"></span>
            </button>
            <button id="toggleSoundBtn" class="secondary-button sound-toggle sound-on">
                <span class="sound-icon">üîä</span>
                <span class="sound-text">–ó–≤—É–∫ –í–ö–õ.</span>
            </button>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <div class="screen-content">
            <div class="game-header">
                <div class="turn-indicator" id="turnIndicator">
                    <span id="turnText">–¢–≤–æ–π —Ö–æ–¥</span>
                </div>
                <button id="resetGameBtn" class="secondary-button">–ï—â–µ —Ä–∞–∑–æ–∫? üéÆ</button>
            </div>

            <div class="game-board" id="gameBoard">
                <!-- Cells will be generated by JavaScript -->
            </div>

            <div class="game-footer">
                <div class="move-counter">
                    –•–æ–¥: <span id="moveCounter">1</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Win Screen -->
    <div id="winScreen" class="screen">
        <div class="screen-content">
            <canvas id="confettiCanvas" class="confetti-canvas"></canvas>

            <div class="result-content">
                <div class="result-icon celebration">üéâ</div>
                <h2 class="result-title">–¢—ã –ø–æ–±–µ–¥–∏–ª–∞! üíï</h2>
                <p class="result-subtitle">–ú–æ–ª–æ–¥–µ—Ü! –¢—ã —É–º–Ω–∏—Ü–∞! ‚ú®</p>

                <div class="promo-card" id="promoCard">
                    <div class="promo-label">–¢–≤–æ–π –ø—Ä–æ–º–æ–∫–æ–¥</div>
                    <div class="promo-code" id="promoCodeDisplay">XXXXX</div>
                    <button id="copyPromoBtn" class="copy-button">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
                    </button>
                </div>

                <div class="promo-limit-warning" id="promoLimitWarning" style="display: none;">
                    <p>‚ö†Ô∏è –î–æ—Å—Ç–∏–≥–Ω—É—Ç –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ (3/–¥–µ–Ω—å)</p>
                </div>

                <button id="playAgainFromWin" class="primary-button">
                    –î–∞–≤–∞–π –µ—â–µ! ‚ú®
                    <span class="button-glow"></span>
                </button>
            </div>
        </div>
    </div>

    <!-- Lose Screen -->
    <div id="loseScreen" class="screen">
        <div class="screen-content">
            <div class="result-content">
                <div class="result-icon sad">üíï</div>
                <h2 class="result-title">–ü–æ–¥—Ä—É–≥–∞ –≤—ã–∏–≥—Ä–∞–ª–∞!</h2>
                <p class="result-subtitle">–í —ç—Ç–æ—Ç —Ä–∞–∑ –æ–Ω–∞ –±—ã–ª–∞ —Å–∏–ª—å–Ω–µ–µ ‚ú®</p>

                <div class="encouragement">
                    <p>–î–∞–≤–∞–π —Å—ã–≥—Ä–∞–µ–º –µ—â—ë —Ä–∞–∑! üí´</p>
                </div>

                <button id="playAgainFromLose" class="primary-button">
                    –î–∞–≤–∞–π –µ—â–µ! üí™
                    <span class="button-glow"></span>
                </button>

                <button id="backToMenu" class="secondary-button">
                    –ù–∞ –≥–ª–∞–≤–Ω—É—é üè†
                </button>
            </div>
        </div>
    </div>

    <!-- Draw Screen -->
    <div id="drawScreen" class="screen">
        <div class="screen-content">
            <div class="result-content">
                <div class="result-icon neutral">ü§ù</div>
                <h2 class="result-title">–ù–∏—á—å—è!</h2>
                <p class="result-subtitle">–ù–∏–∫—Ç–æ –Ω–µ –ø–æ–±–µ–¥–∏–ª –≤ —ç—Ç–æ—Ç —Ä–∞–∑</p>

                <button id="playAgainFromDraw" class="primary-button">
                    –î–∞–≤–∞–π –µ—â–µ! üéÆ
                    <span class="button-glow"></span>
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <span id="toastText"></span>
    </div>

    <!-- Scripts -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="telegram-init.js"></script>
    <script src="game.js"></script>
    <script src="ui.js"></script>
    <script src="api-client.js"></script>
    <script src="assets/confetti.js"></script>
    <script src="assets/sound.js"></script>
    <script src="app.js"></script>
</body>

</html>