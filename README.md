# üéÆ XOBot - Telegram Tic Tac Toe Game

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç —Å –∏–≥—Ä–æ–π –≤ –∫—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤. –ü—Ä–∏ –ø–æ–±–µ–¥–µ –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–æ–º–æ–∫–æ–¥ –Ω–∞ —Å–∫–∏–¥–∫—É!

## üåü –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üéØ **–£–º–Ω—ã–π AI** - –Ω–µ–ø–æ–±–µ–¥–∏–º—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º Minimax —Å alpha-beta pruning
- üíù **–ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω** - –ø–∞—Å—Ç–µ–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –∂–µ–Ω—Å–∫—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é 25-40 –ª–µ—Ç  
- üéÅ **–ü—Ä–æ–º–æ–∫–æ–¥—ã** - –¥–æ 3 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –≤ –¥–µ–Ω—å –ø—Ä–∏ –ø–æ–±–µ–¥–µ
- üì± **Telegram WebApp** - –Ω–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram
- üé® **–ê–Ω–∏–º–∞—Ü–∏–∏** - –∫–æ–Ω—Ñ–µ—Ç—Ç–∏, –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã, –≤–∏–±—Ä–∞—Ü–∏—è
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - rate limiting, –≤–∞–ª–∏–¥–∞—Ü–∏—è, HTTPS

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
XOBot/
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ database.py            # –†–∞–±–æ—Ç–∞ —Å SQLite –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ promo_generator.py     # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
‚îú‚îÄ‚îÄ api.py                 # Flask API endpoints
‚îú‚îÄ‚îÄ bot.py                 # Telegram Bot
‚îú‚îÄ‚îÄ run.py                 # –ì–ª–∞–≤–Ω—ã–π entry point
‚îú‚îÄ‚îÄ requirements.txt       # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞—Ç—å –∏–∑ .env.example)
‚îú‚îÄ‚îÄ nginx.conf             # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ deploy.sh              # –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
‚îú‚îÄ‚îÄ systemd/
‚îÇ   ‚îî‚îÄ‚îÄ xobot.service      # Systemd service
‚îî‚îÄ‚îÄ webapp/
    ‚îú‚îÄ‚îÄ index.html         # HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
    ‚îú‚îÄ‚îÄ styles.css         # –°—Ç–∏–ª–∏
    ‚îú‚îÄ‚îÄ telegram-init.js   # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    ‚îú‚îÄ‚îÄ game.js            # –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ (Minimax AI)
    ‚îú‚îÄ‚îÄ ui.js              # UI –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
    ‚îú‚îÄ‚îÄ api-client.js      # API –∫–ª–∏–µ–Ω—Ç
    ‚îú‚îÄ‚îÄ app.js             # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
    ‚îî‚îÄ‚îÄ assets/
        ‚îî‚îÄ‚îÄ confetti.js    # –ê–Ω–∏–º–∞—Ü–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11 –∏–ª–∏ –≤—ã—à–µ
- Telegram Bot Token (–ø–æ–ª—É—á–∏—Ç—å —É [@BotFather](https://t.me/BotFather))
- –î–æ–º–µ–Ω —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
- Nginx (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/yourusername/XOBot.git
cd XOBot
```

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–µ–º .env —Ñ–∞–π–ª –∏–∑ –ø—Ä–∏–º–µ—Ä–∞
cp .env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º .env –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
nano .env  # –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

–í `.env` —Ñ–∞–π–ª–µ —É–∫–∞–∂–∏—Ç–µ:
```env
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
WEBAPP_URL=https://yourdomain.com/webapp
API_URL=https://yourdomain.com/api
SECRET_KEY=—Å–ª—É—á–∞–π–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞
```

> üí° **–°–æ–≤–µ—Ç**: –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SECRET_KEY –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
> ```bash
> python -c "import secrets; print(secrets.token_hex(32))"
> ```

### 2. –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

```bash
# –°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
python database.py

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
python run.py
```

–ë–æ—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ Telegram, WebApp –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ `http://localhost:5000/webapp`

### 3. –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x deploy.sh

# –ó–∞–ø—É—Å–∫–∞–µ–º –¥–µ–ø–ª–æ–π
./deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ù–∞—Å—Ç—Ä–æ–∏—Ç Nginx
- –ù–∞—Å—Ç—Ä–æ–∏—Ç systemd service
- –ó–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞

### 4. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è WebApp –≤ BotFather

1. –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/mybots`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
4. –í—ã–±–µ—Ä–∏—Ç–µ "Bot Settings" ‚Üí "Menu Button"
5. –£–∫–∞–∂–∏—Ç–µ URL: `https://–∫–æ–Ω—Ç–µ–Ω—Ç–±–æ—Ç.—Ä—Ñ/webapp/`

## üéÆ API Endpoints

### `POST /api/game/win`
–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–±–µ–¥—ã –∏–≥—Ä–æ–∫–∞
```json
{
  "user_id": 123456789,
  "username": "testuser",
  "timestamp": "2025-12-08T14:30:00Z"
}
```

–û—Ç–≤–µ—Ç:
```json
{
  "status": "ok",
  "promo_code": "K7M2X",
  "limit_reached": false,
  "message_sent": true
}
```

### `POST /api/game/lose`
–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ä–∞–∂–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞

### `GET /api/user/stats/{user_id}`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### `GET /api/health`
Health check endpoint

## ü§ñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∫–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã
- `/play` - –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É
- `/help` - –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã
- `/history` - –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/promo_info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–º–æ–∫–æ–¥–∞—Ö

## üõ† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status xobot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart xobot

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
sudo systemctl stop xobot

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl start xobot

# –õ–æ–≥–∏
sudo journalctl -u xobot -f
```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

SQLite –±–∞–∑–∞ `xobot.db` —Å–æ–¥–µ—Ä–∂–∏—Ç 3 —Ç–∞–±–ª–∏—Ü—ã:

- **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (user_id, username, wins, losses)
- **promo_codes** - –ø—Ä–æ–º–æ–∫–æ–¥—ã (code, user_id, expires_at, used)
- **game_history** - –∏—Å—Ç–æ—Ä–∏—è –∏–≥—Ä (user_id, result, timestamp, promo_code)

## üé® –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

**Backend:**
- Python 3.11+
- python-telegram-bot 21.7
- Flask 3.0.3
- SQLite

**Frontend:**
- Vanilla JavaScript (ES6+)
- CSS3 (Flexbox, Grid, Animations)
- Telegram WebApp SDK
- Canvas API (–¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ HTTPS —Ç–æ–ª—å–∫–æ (Let's Encrypt SSL)
- ‚úÖ Rate limiting (10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç–∞)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ CORS –¥–ª—è Telegram WebApp
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [CONTRIBUTING.md](CONTRIBUTING.md) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, –∫–∞–∫ –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥.

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ —É—è–∑–≤–∏–º–æ—Å—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, **–ù–ï** —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π issue. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [SECURITY.md](SECURITY.md) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –æ—Ç—á–µ—Ç—É –æ–± —É—è–∑–≤–∏–º–æ—Å—Ç—è—Ö.

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∂–µ–Ω—Å–∫–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏ 25-40 –ª–µ—Ç

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Telegram Bot API](https://core.telegram.org/bots/api)
- [Telegram WebApp API](https://core.telegram.org/bots/webapps)
- [Flask Documentation](https://flask.palletsprojects.com/)
- [python-telegram-bot Documentation](https://python-telegram-bot.org/)

---

**WebApp:** https://–∫–æ–Ω—Ç–µ–Ω—Ç–±–æ—Ç.—Ä—Ñ/webapp  
**SSL:** –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ –º–∞—Ä—Ç–∞ 2026
