# Security Policy

## Supported Versions

We actively support the following versions with security updates:

| Version | Supported          |
| ------- | ------------------ |
| 1.0.x   | :white_check_mark: |

## Reporting a Vulnerability

Если вы обнаружили уязвимость безопасности, пожалуйста, **НЕ** создавайте публичный issue.

Вместо этого:

1. **Email**: Отправьте описание уязвимости на email (если указан в профиле)
2. **GitHub Security Advisory**: Используйте [GitHub Security Advisory](https://github.com/yourusername/XOBot/security/advisories/new)
3. **Private Message**: Свяжитесь с мейнтейнером через приватное сообщение

### Что включить в отчет:

- Описание уязвимости
- Шаги для воспроизведения
- Потенциальное влияние
- Предложения по исправлению (если есть)

### Время ответа:

- **Критические уязвимости**: Ответ в течение 24 часов
- **Высокие**: Ответ в течение 72 часов
- **Средние/Низкие**: Ответ в течение 1 недели

## Security Best Practices

### Для разработчиков:

1. **Никогда не коммитьте секреты** в репозиторий
   - Используйте `.env` файлы (они в `.gitignore`)
   - Используйте переменные окружения
   - Проверяйте `.env.example` перед коммитом

2. **Валидация данных**
   - Всегда валидируйте входные данные от пользователей
   - Используйте rate limiting для API endpoints
   - Проверяйте InitData от Telegram WebApp

3. **Зависимости**
   - Регулярно обновляйте зависимости
   - Используйте `pip-audit` или `safety` для проверки уязвимостей
   - Проверяйте `requirements.txt` перед обновлением

4. **HTTPS только**
   - В продакшене используйте только HTTPS
   - Настройте SSL сертификаты (Let's Encrypt)
   - Используйте HSTS headers

5. **База данных**
   - Используйте параметризованные запросы (SQLite уже делает это)
   - Регулярно делайте бэкапы
   - Не храните чувствительные данные в открытом виде

### Известные ограничения:

- Rate limiting использует in-memory хранилище (в продакшене рекомендуется Redis)
- Валидация Telegram InitData упрощена (TODO: полная HMAC валидация)
- SQLite не подходит для высоконагруженных приложений

## Security Checklist

Перед деплоем проверьте:

- [ ] Все секреты в `.env` файле (не в коде)
- [ ] `.env` в `.gitignore`
- [ ] HTTPS настроен и работает
- [ ] SSL сертификат действителен
- [ ] Rate limiting включен
- [ ] CORS настроен правильно
- [ ] Зависимости обновлены
- [ ] База данных защищена от SQL injection (используются параметризованные запросы)
- [ ] Логи не содержат чувствительных данных
- [ ] Systemd service запущен от непривилегированного пользователя

## Changelog

### 2025-01-XX
- Initial security policy
